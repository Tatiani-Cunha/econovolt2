
@app.route('/index')
def index2():
    return render_template('index.html')



@app.route("/")  # users
def index():
    users = Users.query.all()   # select * from users;
    return render_template("users.html", users=users)


@app.route("/user/<int:id>")  # user
@login_required                 ### TODO
def unique(id):
    user = Users.query.get(id)
    return render_template("user.html", user=user)




# Deletar um usuário -- simulações depois
@app.route("/user/delete/<int:id>")
def delete(id):
    user = Users.query.filter_by(id=id).first()
    db.session.delete(user)
    db.session.commit()
    return redirect("/")


@app.route('/redirect')
def redirect2():
    return redirect(url_for("response"))


@app.route('/response')
def response():
    return render_template("response.html")


@app.route("/users")
@app.route("/users/<int:id>")
#@login_required     # somente usuários logados podem ver simulações
def users(id):
    titulo = request.args.get("titulo")
    user = dict(
        path = request.path, 
        referrer=request.referrer, 
        content_type=request.content_type, 
        method=request.method,
        titulo = titulo, 
        id = id if id else 0
    )
    return render_template("users.html", user=user)


@app.route("/register", methods=["GET", "POST"])
def register():
    if request.method == "POST":
        user = Users()
        user.name = request.form["name"]
        user.email = request.form["email"]
        user.password = generate_password_hash(request.form["password"])
        db.session.add(user)
        db.session.commit()
        flash("Usuário criado com sucesso!")
        return redirect(url_for("index"))
    return render_template("register.html")



@app.route("/login", methods=["GET", "POST"])
def login():
    if current_user.is_authenticated:
        return redirect(url_for('index'))
    form = LoginForm()
    if form.validate_on_submit():
        user = Users.query.filter_by(username=form.username.data).first()
        if user is None or not user.check_password(form.password.data):
            flash("Nome ou senha inválido!")
            return redirect(url_for('login'))
        login_user(user, remember=form.remember_me.data)
        return redirect(url_for('index'))
    return render_template('login.html', title='Entrar', form=form)


@app.route("/logout")
@login_required
def logout():
    logout_user()
    return render_template("users.html")

# TODO: enviar resultados simulações calculados em uma rota para o template


@app.route("/about")
def about():
    return render_template("about.html")


@app.route('/simulator')  # se logado vai pra página de simulação
@login_required
def simulator():
    flash("Bem-vindo ao simulador!!!!!")
    return render_template("simulator.html")

